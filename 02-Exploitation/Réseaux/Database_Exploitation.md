# Exploitation des Bases de Données (MySQL, PostgreSQL, MSSQL, Oracle, Redis, MongoDB)

## Objectif
Exploiter des faiblesses de configuration ou des mots de passe faibles pour obtenir un accès non autorisé, exfiltrer des données ou rebondir sur d'autres systèmes.

---

## Explications vulgarisées
- Les bases de données sont souvent mal sécurisées (comptes par défaut, mots de passe faibles, accès réseau ouvert, absence de chiffrement).
- L'exploitation consiste à accéder à des données sensibles, à exécuter des commandes SQL, ou à rebondir sur d'autres systèmes via des fonctions d'exécution de code.

---

## Schéma de l'exploitation typique

Schéma textuel :
1. Reconnaissance
   ↓
2. Connexion à la base
   ↓
3. Énumération des bases, tables, utilisateurs
   ↓
4. Extraction de données sensibles
   ↓
5. Exploitation (exécution de commandes ou rebond)

---

## Commandes et étapes essentielles

### 1. Connexion avec des credentials par défaut (MySQL)
```bash
mysql -h target.com -u root -p
```
- **Astuce débutant** : Tester sans mot de passe ou avec des mots de passe faibles ("root", "admin", "password").

### 2. Enumération et extraction de données (MySQL/PostgreSQL/MSSQL)
```sql
SHOW DATABASES;
USE targetdb;
SHOW TABLES;
SELECT * FROM users;
```
- **Astuce** : Chercher des bases "test", "backup", ou des utilisateurs avec accès large.

### 3. Exploitation automatisée avec Nmap
```bash
nmap --script mysql-enum,mysql-users,mysql-databases -p 3306 target.com
nmap --script ms-sql-info,ms-sql-empty-password -p 1433 target.com
nmap --script pgsql-brute -p 5432 target.com
```
- **mysql-enum** : Enumère les bases, utilisateurs, variables.
- **ms-sql-info** : Infos sur MSSQL.
- **pgsql-brute** : Brute-force PostgreSQL.

### 4. Exploitation Oracle
```bash
sqlplus system/password@target.com:1521/XE
SELECT username FROM all_users;
SELECT * FROM dba_users;
```

### 5. Exploitation Redis
```bash
redis-cli -h target.com
keys *
get flag
```
- **Astuce** : Tester la connexion sans mot de passe, puis avec des mots de passe faibles.

### 6. Exploitation MongoDB
```bash
mongo --host target.com
show dbs
use admin
db.system.users.find()
```
- **Astuce** : Tester l'accès sans mot de passe, puis avec des mots de passe faibles.

---

## Conseils pour débutants
- Toujours tester les accès par défaut avant d'essayer des credentials complexes.
- Chercher des bases "test", "backup", ou des utilisateurs "admin", "root", "system".
- Utiliser Nmap pour automatiser la détection et l'énumération.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - Database Exploitation](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Methodology%20and%20Resources/Database%20Methodology)
- [Nmap Database NSE Scripts](https://nmap.org/nsedoc/categories/database.html)
- [MongoDB Security](https://docs.mongodb.com/manual/security/) 