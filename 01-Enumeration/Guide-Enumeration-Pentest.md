# 01-Enumeration

## 📝 Vue d'ensemble

L'énumération est la phase cruciale qui suit la reconnaissance. C'est ici qu'on **interroge en profondeur** les services découverts pour identifier les **vulnérabilités exploitables**. Think of it comme "fouiller dans les tiroirs" après avoir trouvé les portes ouvertes.

> **💡 Pour les débutants** : Si la reconnaissance nous dit "il y a un serveur web sur le port 80", l'énumération va nous dire "c'est Apache 2.4.7 avec PHP 5.6, il y a un dossier /admin/ et un fichier config.php accessible".

## ⚠️ **IMPORTANT - À propos des exemples**

> **🎯 TOUS les noms de domaines, IPs, usernames dans ce guide sont des EXEMPLES FICTIFS !**

### 📝 Exemples vs Réalité :

**Dans le guide (EXEMPLE FICTIF) :**
```
target.com
192.168.1.100
admin, user, guest
/admin/, /backup/
```

**Dans la vraie vie, vous devez adapter :**
```
votre-vraie-cible.com
10.0.2.15
marie.martin, j.dupont
/wp-admin/, /phpmyadmin/
```

### 🔄 Comment adapter les exemples :
1. **Remplacez** `target.com` par votre vraie cible
2. **Remplacez** `attacker_ip` par votre vraie IP d'attaquant
3. **Remplacez** `192.168.1.100` par la vraie IP cible
4. **Remplacez** les noms d'utilisateurs par ceux trouvés
5. **Remplacez** les répertoires par ceux découverts

## 🗂️ Structure et Méthodes

### Services-Réseau/
Services les plus couramment rencontrés et leurs techniques d'énumération
- **SSH_Enumeration.md** - Énumération SSH (port 22)
- **FTP_Enumeration.md** - Énumération FTP (port 21)
- **SMB_Enumeration.md** - Énumération SMB/NetBIOS (ports 139/445)
- **HTTP_HTTPS_Enumeration.md** - Énumération Web (ports 80/443)
- **DNS_Enumeration.md** - Énumération DNS (port 53)
- **SNMP_Enumeration.md** - Énumération SNMP (port 161)
- **Database_Enumeration.md** - MySQL, PostgreSQL, MSSQL

### Systèmes/
Énumération spécifique par système d'exploitation
- **Linux_Enumeration.md** - Techniques Linux-specific
- **Windows_Enumeration.md** - Techniques Windows-specific
- **Active_Directory.md** - Énumération AD et domaines

### _Tools/
Guides détaillés des outils d'énumération
- **Nmap_Scripts.md** - Scripts NSE pour énumération
- **Enum4linux.md** - Énumération Linux/SMB
- **Gobuster_Dirb.md** - Fuzzing de répertoires web
- **Nikto.md** - Scanner de vulnérabilités web
- **Metasploit_Aux.md** - Modules auxiliaires Metasploit

## 🎯 Méthodologie d'Énumération

### Phase 1 : Énumération des Services
```bash
# Scan de services détaillé (après nmap initial)
nmap -sC -sV -p 21,22,80,135,139,445 target.com

# Énumération avec scripts NSE spécifiques
nmap --script smb-enum-shares,smb-enum-users target.com
```

### Phase 2 : Énumération Web (si port 80/443 ouvert)
```bash
# Découverte de répertoires
gobuster dir -u http://target.com -w /usr/share/wordlists/dirb/common.txt

# Scan de vulnérabilités web
nikto -h http://target.com

# Énumération avec scripts personnalisés
nmap --script http-enum,http-headers target.com -p 80
```

### Phase 3 : Énumération SMB (si ports 139/445 ouverts)
```bash
# Énumération complète SMB/NetBIOS
enum4linux -a target.com

# Listage des partages avec smbclient
smbclient -L //target.com -N

# Avec Metasploit
msfconsole
use auxiliary/scanner/smb/smb_enumshares
set RHOSTS target.com
run
```

## 🔍 Techniques par Service

### 🌐 HTTP/HTTPS (Ports 80/443)
**Objectif** : Trouver pages cachées, technologies utilisées, vulnérabilités web

```bash
# 1. Identification du serveur web
curl -I http://target.com
# Recherche : Server: Apache/2.4.7, X-Powered-By: PHP/5.6

# 2. Fuzzing de répertoires
gobuster dir -u http://target.com -w /usr/share/seclists/Discovery/Web-Content/common.txt -x php,html,txt

# 3. Scan de vulnérabilités
nikto -h http://target.com -output nikto_results.txt

# 4. Avec Metasploit
msfconsole
use auxiliary/scanner/http/dir_scanner
set RHOSTS target.com
set DICTIONARY /usr/share/metasploit-framework/data/wordlists/directory.txt
run
```

### 🐧 SSH (Port 22)
**Objectif** : Énumérer les utilisateurs, identifier la version SSH

```bash
# 1. Banner grabbing
nc target.com 22
# ou
nmap -sV -p 22 target.com

# 2. Énumération des utilisateurs (si vulnérable)
# Avec Metasploit
use auxiliary/scanner/ssh/ssh_enumusers
set RHOSTS target.com
set USER_FILE /usr/share/seclists/Usernames/top-usernames-shortlist.txt
run

# 3. Test d'authentification par clé
ssh-keyscan target.com
```

### 📁 SMB/NetBIOS (Ports 139/445)  
**Objectif** : Lister partages, utilisateurs, informations système

```bash
# 1. Énumération complète avec enum4linux
enum4linux -a target.com

# 2. Listage des partages
smbclient -L //target.com -N

# 3. Test d'accès aux partages
smbclient //target.com/share_name -N

# 4. Avec Metasploit - Multiple modules
msfconsole
use auxiliary/scanner/smb/smb_version        # Version SMB
use auxiliary/scanner/smb/smb_enumshares     # Partages
use auxiliary/scanner/smb/smb_enumusers      # Utilisateurs
use auxiliary/scanner/smb/smb_lookupsid      # SID lookup
```

## 🛠️ Outils Essentiels et Usage

### Nmap Scripts (NSE)
```bash
# Scripts d'énumération par service
nmap --script smb-enum-* target.com          # SMB
nmap --script http-enum target.com -p 80     # HTTP
nmap --script ssh-* target.com -p 22         # SSH
nmap --script dns-* target.com -p 53         # DNS

# Script personalisation
ls /usr/share/nmap/scripts/ | grep enum
```

### Gobuster vs Dirb
```bash
# Gobuster (plus rapide)
gobuster dir -u http://target.com -w wordlist.txt -x php,html -t 50

# DirB (plus features built-in)
dirb http://target.com /usr/share/dirb/wordlists/common.txt -X .php,.html
```

### Metasploit pour Énumération
```bash
msfconsole
search type:auxiliary scanner
use auxiliary/scanner/[service]/[module]

# Exemples courants :
use auxiliary/scanner/http/dir_scanner
use auxiliary/scanner/smb/smb_enumshares  
use auxiliary/scanner/ssh/ssh_enumusers
use auxiliary/scanner/snmp/snmp_enum
```

## 📋 Checklist d'Énumération

### ✅ Pour chaque service trouvé :
1. **Version identification** - Quelle version exacte ?
2. **Default credentials** - Login par défaut testé ?
3. **Anonymous access** - Accès anonyme possible ?
4. **Vulnerable version** - Version connue vulnérable ?
5. **Misconfigurations** - Mauvaises configurations ?

### ✅ Web Applications :
1. **Technologies** - Framework, CMS, langage ?
2. **Hidden directories** - /admin, /backup, /config ?
3. **File extensions** - .php, .asp, .jsp testés ?
4. **Parameters** - GET/POST parameters énumérés ?
5. **Cookies/Headers** - Informations dans headers ?

### ✅ Network Services :
1. **Shares enumerated** - Partages listés et testés ?
2. **Users enumerated** - Liste d'utilisateurs obtenue ?
3. **Permissions tested** - Permissions de chaque ressource ?
4. **Service-specific** - Tests spécifiques au service ?

## 🎓 Tips pour Débutants

### 🤔 Comment choisir quoi énumérer ?
1. **Commencer par les services web** (80/443) - souvent les plus vulnérables
2. **Puis SMB** (139/445) - riche en informations
3. **SSH** (22) - pour les credentials/keys
4. **Autres services** selon contexte

### 📝 Comment documenter ?
```bash
# Créer des dossiers par cible
mkdir target_enum
cd target_enum

# Sauvegarder tous les outputs
nmap -sC -sV target.com > nmap_detailed.txt
enum4linux -a target.com > smb_enum.txt  
gobuster dir -u http://target.com -w wordlist.txt > web_dirs.txt

# Screenshots pour le web
firefox http://target.com  # Screenshot manuel
```

### ⚡ Automatisation
```bash
# Script d'énumération rapide
#!/bin/bash
TARGET=$1
mkdir ${TARGET}_enum

# Services
nmap -sC -sV $TARGET > ${TARGET}_enum/nmap.txt

# Web si port 80 ouvert
if grep -q "80/tcp.*open" ${TARGET}_enum/nmap.txt; then
    gobuster dir -u http://$TARGET -w /usr/share/dirb/wordlists/common.txt > ${TARGET}_enum/web_dirs.txt
    nikto -h http://$TARGET > ${TARGET}_enum/nikto.txt
fi

# SMB si ports 139/445 ouverts  
if grep -q "445/tcp.*open\|139/tcp.*open" ${TARGET}_enum/nmap.txt; then
    enum4linux -a $TARGET > ${TARGET}_enum/smb.txt
fi
```

## ⚠️ Bonnes Pratiques

### 🚨 Rate Limiting
- **Threads limités** : Pas plus de 10-20 threads simultanés
- **Delays entre requêtes** : Éviter la détection IDS/IPS
- **Rotate User-Agents** : Pour les scans web

### 🔍 Stealth Techniques
- **Slow scans** : Étaler dans le temps
- **Decoy scans** : nmap -D (avec autorisation)
- **Fragmented packets** : nmap -f

---
*Section maintenue par : [Votre nom]*  
*Dernière mise à jour : [Date]* 